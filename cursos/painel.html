<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel do Usu√°rio</title>

<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  // üîß Configura√ß√£o Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyC4AAbC8vCFAmlPlur12Nm7YBKPjaSjumM",
    authDomain: "meuappweb-65522.firebaseapp.com",
    projectId: "meuappweb-65522",
    storageBucket: "meuappweb-65522.firebasestorage.app",
    messagingSenderId: "305368794616",
    appId: "1:305368794616:web:d987589863479e576ac20d",
    measurementId: "G-L0VWMGJ003"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // üß© Detecta login e exibe bot√µes conforme fun√ß√£o
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      const docRef = doc(db, "alunos", user.uid);
      const snap = await getDoc(docRef);

      if (snap.exists()) {
        const dados = snap.data();
        document.getElementById("nomeUsuario").innerText = dados.nome || user.email;

        // Exibe bot√µes conforme a fun√ß√£o
        if (dados.funcao === "admin") {
          document.getElementById("botoesAdmin").style.display = "block";
        } else {
          document.getElementById("botoesAdmin").style.display = "none";
        }
      }
    } else {
      window.location.href = "index.html"; // se n√£o estiver logado
    }
  });

  // üîπ Bot√£o sair
  window.sair = function sair() {
    signOut(auth).then(() => {
      window.location.href = "index.html";
    });
  };
</script>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f6fa;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .painel {
    background: white;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    width: 360px;
    text-align: center;
  }
  h2 {
    color: #007bff;
  }
  button {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
  }
  button:hover {
    background: #0056b3;
  }
  #botoesAdmin {
    display: none;
  }
</style>
</head>

<body>
  <div class="painel">
    <h2>Bem-vindo, <span id="nomeUsuario">Usu√°rio</span>!</h2>

    <div id="botoesAdmin">
      <button onclick="window.location.href='admin.html'">Painel de Administra√ß√£o</button>
      <button onclick="window.location.href='admincsrd.html'">Gerenciar Cursos e Relat√≥rios</button>
    </div>

    <button onclick="sair()">Sair</button>
  </div>
</body>
</html>
